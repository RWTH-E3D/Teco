<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>teaser.data.output.aixlib_output API documentation</title>
<meta name="description" content="This module contains function for AixLib model generation" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>teaser.data.output.aixlib_output</code></h1>
</header>
<section id="section-intro">
<p>This module contains function for AixLib model generation</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;This module contains function for AixLib model generation&#34;&#34;&#34;

import os
import warnings
import shutil
from mako.template import Template
from mako.lookup import TemplateLookup
import teaser.logic.utilities as utilities


def export_multizone(buildings, prj, path=None):
    &#34;&#34;&#34;Exports models for AixLib library

    Exports a building for
    AixLib.ThermalZones.ReducedOrder.Multizone.MultizoneEquipped models
    using the ThermalZoneEquipped and supporting models, like tables and weather
    model. Depending on chosen calculation method the parameter set to 1,2,
    3 or 4 element model. By default it uses the  correction for solar
    glazing (corG) and decoupled heat conduction through windows (
    merge_windows=False). In contrast to versions &lt; 0.5 TEASER now does not
    support any other model options, as we observed no need, since single
    ThermalZones are identical with IBPSA models. If you miss one of the
    old options please contact us.

    This function uses Mako Templates specified in
    data.output.modelicatemplates.AixLib

    Parameters
    ----------

    buildings : list of instances of Building
        list of TEASER instances of a Building that is exported to a AixLib
        MultizoneEquipped models. If you want to export a single building,
        please pass it over as a list containing only that building.
    prj : instance of Project
        Instance of TEASER Project object to access Project related
        information, e.g. name or version of used libraries
    path : string
        if the Files should not be stored in default output path of TEASER,
        an alternative path can be specified as a full path

    Attributes
    ----------

    lookup : TemplateLookup object
        Instance of mako.TemplateLookup to store general functions for templates
    zone_template_1 : Template object
        Template for ThermalZoneRecord using 1 element model
    zone_template_2 : Template object
        Template for ThermalZoneRecord using 2 element model
    zone_template_3 : Template object
        Template for ThermalZoneRecord using 3 element model
    zone_template_4 : Template object
        Template for ThermalZoneRecord using 4 element model
    model_template : Template object
        Template for MultiZone model
    &#34;&#34;&#34;

    lookup = TemplateLookup(directories=[utilities.get_full_path(
        os.path.join(&#39;data&#39;, &#39;output&#39;, &#39;modelicatemplate&#39;))])
    zone_template_1 = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib&#34;
            &#34;/AixLib_ThermalZoneRecord_OneElement&#34;),
        lookup=lookup)
    zone_template_2 = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib&#34;
            &#34;/AixLib_ThermalZoneRecord_TwoElement&#34;),
        lookup=lookup)
    zone_template_3 = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib&#34;
            &#34;/AixLib_ThermalZoneRecord_ThreeElement&#34;),
        lookup=lookup)
    zone_template_4 = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib&#34;
            &#34;/AixLib_ThermalZoneRecord_FourElement&#34;),
        lookup=lookup)
    model_template = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib/AixLib_Multizone&#34;),
        lookup=lookup)
    test_script_template = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/modelica_test_script&#34;),
        lookup=lookup)

    uses = [
        &#39;Modelica(version=&#34;&#39; + prj.modelica_info.version + &#39;&#34;)&#39;,
        &#39;AixLib(version=&#34;&#39; + prj.buildings[-1].library_attr.version + &#39;&#34;)&#39;]
    _help_package(
        path=path,
        name=prj.name,
        uses=uses,
        within=None)
    _help_package_order(
        path=path,
        package_list=buildings,
        addition=None,
        extra=None)
    _copy_weather_data(prj.weather_file_path, path)

    for i, bldg in enumerate(buildings):

        ass_error = &#34;You chose IBPSA calculation, &#34; \
                    &#34;but want to export AixLib models, &#34; \
                    &#34;this is not possible&#34;

        assert bldg.used_library_calc == &#39;AixLib&#39;, ass_error

        bldg_path = os.path.join(path, bldg.name)
        utilities.create_path(utilities.get_full_path(bldg_path))
        utilities.create_path(utilities.get_full_path(
            os.path.join(bldg_path,
                         bldg.name + &#34;_DataBase&#34;)))
        bldg.library_attr.modelica_set_temp(path=bldg_path)
        bldg.library_attr.modelica_set_temp_cool(path=bldg_path)
        bldg.library_attr.modelica_AHU_boundary(
            path=bldg_path)
        bldg.library_attr.modelica_gains_boundary(
            path=bldg_path)

        _help_package(path=bldg_path, name=bldg.name, within=bldg.parent.name)
        _help_package_order(
            path=bldg_path,
            package_list=[bldg],
            addition=None,
            extra=bldg.name + &#34;_DataBase&#34;)

        if bldg.building_id is None:
            bldg.building_id = i
        else:
            try:
                bldg.building_id = int(bldg.building_id)
            except UserWarning:
                warnings.warn(&#34;Cannot convert building_id to integer, &#34;
                              &#34;is set to &#34;, i, &#34;which is the enumeration &#34;
                                               &#34;number of the building in &#34;
                                               &#34;the project list.&#34;)
                bldg.building_id = i
        with open(utilities.get_full_path(
                os.path.join(bldg_path, bldg.name + &#34;.mo&#34;)), &#39;w&#39;) as out_file:

            out_file.write(model_template.render_unicode(
                bldg=bldg,
                weather=bldg.parent.weather_file_path,
                modelica_info=bldg.parent.modelica_info))
            out_file.close()

        dir_resources = os.path.join(path, &#34;Resources&#34;)
        if not os.path.exists(dir_resources):
            os.mkdir(dir_resources)
        dir_scripts = os.path.join(dir_resources, &#34;Scripts&#34;)
        if not os.path.exists(dir_scripts):
            os.mkdir(dir_scripts)
        dir_dymola = os.path.join(dir_scripts, &#34;Dymola&#34;)
        if not os.path.exists(dir_dymola):
            os.mkdir(dir_dymola)
        _help_test_script(bldg, dir_dymola, test_script_template)

        zone_path = os.path.join(bldg_path, bldg.name + &#34;_DataBase&#34;)

        for zone in bldg.thermal_zones:

            with open(utilities.get_full_path(os.path.join(
                    zone_path,
                    bldg.name + &#39;_&#39; + zone.name + &#39;.mo&#39;)), &#39;w&#39;) as out_file:
                if type(zone.model_attr).__name__ == &#34;OneElement&#34;:
                    out_file.write(zone_template_1.render_unicode(zone=zone))
                elif type(zone.model_attr).__name__ == &#34;TwoElement&#34;:
                    out_file.write(zone_template_2.render_unicode(zone=zone))
                elif type(zone.model_attr).__name__ == &#34;ThreeElement&#34;:
                    out_file.write(zone_template_3.render_unicode(zone=zone))
                elif type(zone.model_attr).__name__ == &#34;FourElement&#34;:
                    out_file.write(zone_template_4.render_unicode(zone=zone))

                out_file.close()

        _help_package(
            path=zone_path,
            name=bldg.name + &#39;_DataBase&#39;,
            within=prj.name + &#39;.&#39; + bldg.name)
        _help_package_order(
            path=zone_path,
            package_list=bldg.thermal_zones,
            addition=bldg.name + &#34;_&#34;,
            extra=None)

    _copy_script_unit_tests(os.path.join(dir_scripts, &#34;runUnitTests.py&#34;))
    _copy_reference_results(dir_resources, prj)

    print(&#34;Exports can be found here:&#34;)
    print(path)


def _copy_reference_results(dir_resources, prj):
    &#34;&#34;&#34;Copy reference results to modelica output.

    Parameters
    ----------
    dir_resources : str
        Resources directory of the modelica output
    prj : teaser.project.Project
        Project to be exported
    &#34;&#34;&#34;

    if prj.dir_reference_results is not None:
        dir_ref_out = os.path.join(dir_resources, &#34;ReferenceResults&#34;)
        if not os.path.exists(dir_ref_out):
            os.mkdir(dir_ref_out)
        dir_ref_out_dymola = os.path.join(dir_ref_out, &#34;Dymola&#34;)
        if not os.path.exists(dir_ref_out_dymola):
            os.mkdir(dir_ref_out_dymola)
        for filename in os.listdir(prj.dir_reference_results):
            if filename.endswith(&#34;.txt&#34;):
                shutil.copy2(
                    os.path.join(prj.dir_reference_results, filename),
                    os.path.join(dir_ref_out_dymola, filename)
                )


def _help_test_script(bldg, dir_dymola, test_script_template):
    &#34;&#34;&#34;Create a test script for regression testing with BuildingsPy

    Parameters
    ----------
    bldg : teaser.logic.buildingobjects.building.Building
        Building for which test script is created
    dir_dymola : str
        Output directory for Dymola scripts
    test_script_template : mako.template.Template
        Template for the test script

    Returns
    -------
    dir_scripts : str
        Path to the scripts directory
    &#34;&#34;&#34;

    dir_building = os.path.join(dir_dymola, bldg.name)
    if not os.path.exists(dir_building):
        os.mkdir(dir_building)
    with open(utilities.get_full_path(os.path.join(
            dir_building, bldg.name + &#34;.mos&#34;)), &#39;w&#39;) as out_file:

        names_variables = []
        for i, zone in enumerate(bldg.thermal_zones):
            names_variables.append(f&#34;multizone.PHeater[{i+1}]&#34;)
            names_variables.append(f&#34;multizone.PCooler[{i+1}]&#34;)
            names_variables.append(f&#34;multizone.TAir[{i+1}]&#34;)
        out_file.write(test_script_template.render_unicode(
            project=bldg.parent,
            bldg=bldg,
            stop_time=3600 * 24 * 365,
            names_variables=names_variables,
        ))
        out_file.close()


def _help_package(path, name, uses=None, within=None):
    &#34;&#34;&#34;creates a package.mo file

    private function, do not call

    Parameters
    ----------

    path : string
        path of where the package.mo should be placed
    name : string
        name of the Modelica package
    within : string
        path of Modelica package containing this package

    &#34;&#34;&#34;

    package_template = Template(filename=utilities.get_full_path(
        &#34;data/output/modelicatemplate/package&#34;))
    with open(utilities.get_full_path(os.path.join(
            path, &#34;package.mo&#34;)), &#39;w&#39;) as out_file:

        out_file.write(package_template.render_unicode(
            name=name,
            within=within,
            uses=uses))
        out_file.close()


def _help_package_order(path, package_list, addition=None, extra=None):
    &#34;&#34;&#34;creates a package.order file

    private function, do not call

    Parameters
    ----------

    path : string
        path of where the package.order should be placed
    package_list : [string]
        name of all models or packages contained in the package
    addition : string
        if there should be a suffix in front of package_list.string it can
        be specified
    extra : string
        an extra package or model not contained in package_list can be
        specified

    &#34;&#34;&#34;

    order_template = Template(filename=utilities.get_full_path(
        &#34;data/output/modelicatemplate/package_order&#34;))
    with open(utilities.get_full_path(
            path + &#34;/&#34; + &#34;package&#34; + &#34;.order&#34;), &#39;w&#39;) as out_file:

        out_file.write(order_template.render_unicode
                       (list=package_list, addition=addition, extra=extra))
        out_file.close()


def _copy_weather_data(source_path, destination_path):
    &#34;&#34;&#34;Copies the imported .mos weather file to the results folder.

    Parameters
    ----------
    source_path : str
        path of local weather file
    destination_path : str
        path of where the weather file should be placed
    &#34;&#34;&#34;

    shutil.copy2(source_path, destination_path)


def _copy_script_unit_tests(destination_path):
    &#34;&#34;&#34;Copies the script to run the unit tests.

    Parameters
    ----------
    destination_path : str
        path of where the weather file should be placed
    &#34;&#34;&#34;

    source_path = utilities.get_full_path(&#34;data/output/runUnitTests.py&#34;)
    shutil.copy2(source_path, destination_path)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="teaser.data.output.aixlib_output.export_multizone"><code class="name flex">
<span>def <span class="ident">export_multizone</span></span>(<span>buildings, prj, path=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Exports models for AixLib library</p>
<p>Exports a building for
AixLib.ThermalZones.ReducedOrder.Multizone.MultizoneEquipped models
using the ThermalZoneEquipped and supporting models, like tables and weather
model. Depending on chosen calculation method the parameter set to 1,2,
3 or 4 element model. By default it uses the
correction for solar
glazing (corG) and decoupled heat conduction through windows (
merge_windows=False). In contrast to versions &lt; 0.5 TEASER now does not
support any other model options, as we observed no need, since single
ThermalZones are identical with IBPSA models. If you miss one of the
old options please contact us.</p>
<p>This function uses Mako Templates specified in
data.output.modelicatemplates.AixLib</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>buildings</code></strong> :&ensp;<code>list</code> of <code>instances</code> of <code>Building</code></dt>
<dd>list of TEASER instances of a Building that is exported to a AixLib
MultizoneEquipped models. If you want to export a single building,
please pass it over as a list containing only that building.</dd>
<dt><strong><code>prj</code></strong> :&ensp;<code>instance</code> of <code>Project</code></dt>
<dd>Instance of TEASER Project object to access Project related
information, e.g. name or version of used libraries</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>string</code></dt>
<dd>if the Files should not be stored in default output path of TEASER,
an alternative path can be specified as a full path</dd>
</dl>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>lookup</code></strong> :&ensp;<code>TemplateLookup object</code></dt>
<dd>Instance of mako.TemplateLookup to store general functions for templates</dd>
<dt><strong><code>zone_template_1</code></strong> :&ensp;<code>Template object</code></dt>
<dd>Template for ThermalZoneRecord using 1 element model</dd>
<dt><strong><code>zone_template_2</code></strong> :&ensp;<code>Template object</code></dt>
<dd>Template for ThermalZoneRecord using 2 element model</dd>
<dt><strong><code>zone_template_3</code></strong> :&ensp;<code>Template object</code></dt>
<dd>Template for ThermalZoneRecord using 3 element model</dd>
<dt><strong><code>zone_template_4</code></strong> :&ensp;<code>Template object</code></dt>
<dd>Template for ThermalZoneRecord using 4 element model</dd>
<dt><strong><code>model_template</code></strong> :&ensp;<code>Template object</code></dt>
<dd>Template for MultiZone model</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def export_multizone(buildings, prj, path=None):
    &#34;&#34;&#34;Exports models for AixLib library

    Exports a building for
    AixLib.ThermalZones.ReducedOrder.Multizone.MultizoneEquipped models
    using the ThermalZoneEquipped and supporting models, like tables and weather
    model. Depending on chosen calculation method the parameter set to 1,2,
    3 or 4 element model. By default it uses the  correction for solar
    glazing (corG) and decoupled heat conduction through windows (
    merge_windows=False). In contrast to versions &lt; 0.5 TEASER now does not
    support any other model options, as we observed no need, since single
    ThermalZones are identical with IBPSA models. If you miss one of the
    old options please contact us.

    This function uses Mako Templates specified in
    data.output.modelicatemplates.AixLib

    Parameters
    ----------

    buildings : list of instances of Building
        list of TEASER instances of a Building that is exported to a AixLib
        MultizoneEquipped models. If you want to export a single building,
        please pass it over as a list containing only that building.
    prj : instance of Project
        Instance of TEASER Project object to access Project related
        information, e.g. name or version of used libraries
    path : string
        if the Files should not be stored in default output path of TEASER,
        an alternative path can be specified as a full path

    Attributes
    ----------

    lookup : TemplateLookup object
        Instance of mako.TemplateLookup to store general functions for templates
    zone_template_1 : Template object
        Template for ThermalZoneRecord using 1 element model
    zone_template_2 : Template object
        Template for ThermalZoneRecord using 2 element model
    zone_template_3 : Template object
        Template for ThermalZoneRecord using 3 element model
    zone_template_4 : Template object
        Template for ThermalZoneRecord using 4 element model
    model_template : Template object
        Template for MultiZone model
    &#34;&#34;&#34;

    lookup = TemplateLookup(directories=[utilities.get_full_path(
        os.path.join(&#39;data&#39;, &#39;output&#39;, &#39;modelicatemplate&#39;))])
    zone_template_1 = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib&#34;
            &#34;/AixLib_ThermalZoneRecord_OneElement&#34;),
        lookup=lookup)
    zone_template_2 = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib&#34;
            &#34;/AixLib_ThermalZoneRecord_TwoElement&#34;),
        lookup=lookup)
    zone_template_3 = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib&#34;
            &#34;/AixLib_ThermalZoneRecord_ThreeElement&#34;),
        lookup=lookup)
    zone_template_4 = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib&#34;
            &#34;/AixLib_ThermalZoneRecord_FourElement&#34;),
        lookup=lookup)
    model_template = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/AixLib/AixLib_Multizone&#34;),
        lookup=lookup)
    test_script_template = Template(
        filename=utilities.get_full_path(
            &#34;data/output/modelicatemplate/modelica_test_script&#34;),
        lookup=lookup)

    uses = [
        &#39;Modelica(version=&#34;&#39; + prj.modelica_info.version + &#39;&#34;)&#39;,
        &#39;AixLib(version=&#34;&#39; + prj.buildings[-1].library_attr.version + &#39;&#34;)&#39;]
    _help_package(
        path=path,
        name=prj.name,
        uses=uses,
        within=None)
    _help_package_order(
        path=path,
        package_list=buildings,
        addition=None,
        extra=None)
    _copy_weather_data(prj.weather_file_path, path)

    for i, bldg in enumerate(buildings):

        ass_error = &#34;You chose IBPSA calculation, &#34; \
                    &#34;but want to export AixLib models, &#34; \
                    &#34;this is not possible&#34;

        assert bldg.used_library_calc == &#39;AixLib&#39;, ass_error

        bldg_path = os.path.join(path, bldg.name)
        utilities.create_path(utilities.get_full_path(bldg_path))
        utilities.create_path(utilities.get_full_path(
            os.path.join(bldg_path,
                         bldg.name + &#34;_DataBase&#34;)))
        bldg.library_attr.modelica_set_temp(path=bldg_path)
        bldg.library_attr.modelica_set_temp_cool(path=bldg_path)
        bldg.library_attr.modelica_AHU_boundary(
            path=bldg_path)
        bldg.library_attr.modelica_gains_boundary(
            path=bldg_path)

        _help_package(path=bldg_path, name=bldg.name, within=bldg.parent.name)
        _help_package_order(
            path=bldg_path,
            package_list=[bldg],
            addition=None,
            extra=bldg.name + &#34;_DataBase&#34;)

        if bldg.building_id is None:
            bldg.building_id = i
        else:
            try:
                bldg.building_id = int(bldg.building_id)
            except UserWarning:
                warnings.warn(&#34;Cannot convert building_id to integer, &#34;
                              &#34;is set to &#34;, i, &#34;which is the enumeration &#34;
                                               &#34;number of the building in &#34;
                                               &#34;the project list.&#34;)
                bldg.building_id = i
        with open(utilities.get_full_path(
                os.path.join(bldg_path, bldg.name + &#34;.mo&#34;)), &#39;w&#39;) as out_file:

            out_file.write(model_template.render_unicode(
                bldg=bldg,
                weather=bldg.parent.weather_file_path,
                modelica_info=bldg.parent.modelica_info))
            out_file.close()

        dir_resources = os.path.join(path, &#34;Resources&#34;)
        if not os.path.exists(dir_resources):
            os.mkdir(dir_resources)
        dir_scripts = os.path.join(dir_resources, &#34;Scripts&#34;)
        if not os.path.exists(dir_scripts):
            os.mkdir(dir_scripts)
        dir_dymola = os.path.join(dir_scripts, &#34;Dymola&#34;)
        if not os.path.exists(dir_dymola):
            os.mkdir(dir_dymola)
        _help_test_script(bldg, dir_dymola, test_script_template)

        zone_path = os.path.join(bldg_path, bldg.name + &#34;_DataBase&#34;)

        for zone in bldg.thermal_zones:

            with open(utilities.get_full_path(os.path.join(
                    zone_path,
                    bldg.name + &#39;_&#39; + zone.name + &#39;.mo&#39;)), &#39;w&#39;) as out_file:
                if type(zone.model_attr).__name__ == &#34;OneElement&#34;:
                    out_file.write(zone_template_1.render_unicode(zone=zone))
                elif type(zone.model_attr).__name__ == &#34;TwoElement&#34;:
                    out_file.write(zone_template_2.render_unicode(zone=zone))
                elif type(zone.model_attr).__name__ == &#34;ThreeElement&#34;:
                    out_file.write(zone_template_3.render_unicode(zone=zone))
                elif type(zone.model_attr).__name__ == &#34;FourElement&#34;:
                    out_file.write(zone_template_4.render_unicode(zone=zone))

                out_file.close()

        _help_package(
            path=zone_path,
            name=bldg.name + &#39;_DataBase&#39;,
            within=prj.name + &#39;.&#39; + bldg.name)
        _help_package_order(
            path=zone_path,
            package_list=bldg.thermal_zones,
            addition=bldg.name + &#34;_&#34;,
            extra=None)

    _copy_script_unit_tests(os.path.join(dir_scripts, &#34;runUnitTests.py&#34;))
    _copy_reference_results(dir_resources, prj)

    print(&#34;Exports can be found here:&#34;)
    print(path)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="teaser.data.output" href="index.html">teaser.data.output</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="teaser.data.output.aixlib_output.export_multizone" href="#teaser.data.output.aixlib_output.export_multizone">export_multizone</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>